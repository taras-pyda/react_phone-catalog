(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],Array(21).concat([function(e,t,c){},function(e,t,c){},function(e,t,c){},,function(e,t,c){},function(e,t,c){},,,,,,,,,,,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var n=c(15),s=c.n(n),a=c(4),r=c(1),i=c(2),o=(c(21),c(11)),l=(c(22),c(23),c(0)),u=function(){return Object(l.jsx)(a.b,{to:"/",className:"Logo"})},j=(c(25),c(5)),d=c.n(j),b=(c(26),c(3)),O=function(e,t){var c=Object(r.useState)((function(){try{return JSON.parse(localStorage.getItem(t)||"[]")}catch(c){return e}})),n=Object(b.a)(c,2),s=n[0],a=n[1];return[s,function(e){a(e),localStorage.setItem(t,JSON.stringify(e))}]},m=Object(r.createContext)({favourites:JSON.parse(localStorage.getItem("favourites")||"[]"),setFavourites:function(e){localStorage.setItem("favourites",JSON.stringify(e))}}),h=function(e){var t=e.children,c=O([],"favourites"),n=Object(b.a)(c,2),s=n[0],a=n[1],i=Object(r.useMemo)((function(){return{favourites:s,setFavourites:a}}),[s.length]);return Object(l.jsx)(m.Provider,{value:i,children:t})},f=Object(r.createContext)({cart:JSON.parse(localStorage.getItem("cart")||"[]"),setCart:function(e){localStorage.setItem("cart",JSON.stringify(e))}}),x=function(e){var t=e.children,c=O([],"cart"),n=Object(b.a)(c,2),s=n[0],a=n[1],i=Object(r.useMemo)((function(){return{cart:s,setCart:a}}),[s.length]);return Object(l.jsx)(f.Provider,{value:i,children:t})},p=function(e){var t=e.item,c=Object(r.useContext)(m).favourites,n=Object(r.useContext)(f).cart,s="Favourites"===t?c.length:n.length,i="Home"===t?"/":t.toLowerCase();return Object(l.jsx)(a.c,{to:i,className:function(e){return e.isActive?"HeaderLink HeaderLink--active":"HeaderLink"},children:"Favourites"!==t&&"Cart"!==t?t:Object(l.jsx)("div",{className:d()("HeaderLink__icon",{"HeaderLink__icon HeaderLink__icon--cart":"Cart"===t}),children:!!s&&Object(l.jsx)("div",{className:"HeaderLink__count",children:s})})})},g=function(){return Object(l.jsx)("nav",{className:"Nav",children:Object(l.jsx)("ul",{className:"Nav__list",children:["Home","Phones","Tablets","Accessories"].map((function(e){return Object(l.jsx)("li",{className:"Nav__item",children:Object(l.jsx)(p,{item:e})},e)}))})})},v=c(16),_=c.n(v),N=(c(38),c(39),function(e){var t=e.children,c=e.classModificator,n=void 0===c?"":c,s=e.disablet,a=void 0!==s&&s,r=e.callback;return Object(l.jsx)("button",{type:"button",className:"Button ".concat(n),disabled:a,onClick:function(){return r()},children:t})}),S=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),c=t[0],n=t[1],s=Object(r.useState)(!1),o=Object(b.a)(s,2),u=o[0],j=o[1],O=Object(a.d)(),m=Object(b.a)(O,1)[0],h=Object(i.e)().pathname.slice(1),f=Object(i.f)(),x=function(){j(!1),m.delete("query")},p=Object(r.useCallback)(_()((function(e){e?(j(!0),m.set("query",e.toLowerCase())):x(),f("?".concat(m.toString()))}),500),[h]);return Object(r.useEffect)((function(){n(""),x()}),[h]),Object(l.jsxs)("div",{className:"Search",children:[Object(l.jsx)("input",{type:"text",value:c,className:d()("Search__input",{"Search__input--filled":u}),placeholder:"Search in ".concat(h,"..."),onChange:function(e){var t=e.target.value;n(t.trimLeft()),p(t.trimLeft())}}),u&&Object(l.jsx)("div",{className:"Search__button",children:Object(l.jsx)(N,{disablet:!1,classModificator:"Button--close",callback:function(){n(""),x(),f("?".concat(m.toString()))}})})]})},C=function(){return Object(l.jsxs)("header",{className:"Header",children:[Object(l.jsxs)("div",{className:"Header__side",children:[Object(l.jsx)(u,{}),Object(l.jsx)(g,{})]}),Object(l.jsxs)("div",{className:"Header__side",children:[Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{path:"phones",element:Object(l.jsx)(S,{})}),Object(l.jsx)(i.a,{path:"tablets",element:Object(l.jsx)(S,{})}),Object(l.jsx)(i.a,{path:"accessories",element:Object(l.jsx)(S,{})}),Object(l.jsx)(i.a,{path:"favourites",element:Object(l.jsx)(S,{})}),Object(l.jsx)(i.a,{path:"*",element:null})]}),Object(l.jsx)(p,{item:"Favourites"}),Object(l.jsx)(p,{item:"Cart"})]})]})},y=(c(40),function(e){var t=e.children;return Object(l.jsx)("div",{className:"Container",children:t})}),k=(c(41),function(e){var t=e.type,c=Object(i.e)().pathname.slice(1),n="";switch(t){case"page":n="Page not found";break;case"search":n="Nothing found in ".concat(c,"...");break;default:n="There is nothing in ".concat(c,"...")}return Object(l.jsx)("div",{className:"NoResults",children:Object(l.jsx)("h1",{children:n})})}),P=(c(42),function(){return Object(l.jsx)("footer",{className:"Footer",children:Object(l.jsx)(y,{children:Object(l.jsxs)("div",{className:"Footer__content",children:[Object(l.jsx)(u,{}),Object(l.jsx)("a",{href:"https://github.com/taras-pyda",target:"_blank",rel:"noreferrer",className:"Footer__link",children:"Github"}),Object(l.jsx)(N,{disablet:!1,classModificator:"Button--arrowUp",callback:function(){window.scrollTo({top:0,behavior:"smooth"})}})]})})})}),I=(c(43),function(){var e=Object(r.useState)(1),t=Object(b.a)(e,2),c=t[0],n=t[1],s=[1,2,3],a=function(){c>=1&&n(c+1),3===c&&n(1)};return Object(r.useEffect)((function(){var e=setInterval((function(){a()}),5e3);return function(){clearInterval(e)}}),[c]),Object(l.jsxs)("section",{className:"Banner",children:[Object(l.jsx)(N,{disablet:!1,classModificator:"Button--bannerLeft",callback:function(){c<=3&&n(c-1),1===c&&n(3)}}),Object(l.jsx)("div",{className:"Banner__imageWrapper",children:s.map((function(e){return Object(l.jsx)("img",{src:"img/banner/Image_".concat(e,".jpg"),alt:"phones",className:d()("Banner__image",{"Banner__image--selected":e===c})},e)}))}),Object(l.jsx)(N,{disablet:!1,classModificator:"Button--bannerRight",callback:a}),Object(l.jsx)("div",{className:"Banner__pagination",children:s.map((function(e){return Object(l.jsx)("button",{type:"button",className:d()("Banner__paginationItem",{"Banner__paginationItem--selected":e===c}),onClick:function(){return n(e)}},e)}))})]})}),w=c(7),B=(c(44),c(45),c(46),c(47),function(e){var t=e.techSpecs,c=e.isTextSmall;return Object(l.jsx)("div",{className:d()("TechSpecs",{"TechSpecs--smallText":c}),children:t.map((function(e){return Object(l.jsxs)("div",{className:"TechSpecs__item",children:[e.key,Object(l.jsx)("span",{className:"TechSpecs__value",children:e.value?e.value:"None"})]},e.key)}))})}),T=(c(48),c(49),function(e){var t=e.children,c=e.selected,n=e.callback;return Object(l.jsx)("button",{type:"button",className:d()("PrimaryButton",{"PrimaryButton--selected":c}),onClick:function(){return n()},children:t})}),L=function(e){var t=e.id,c=e.size,n=Object(r.useContext)(m),s=n.favourites,a=n.setFavourites,i=Object(r.useContext)(f),o=i.cart,u=i.setCart;return Object(l.jsxs)("div",{className:d()("CardButtons",{"CardButton--big":"big"===c}),children:[Object(l.jsx)(T,{selected:o.includes(t),callback:function(){var e=[];e=o.includes(t)?o.filter((function(e){return e!==t})):[].concat(Object(w.a)(o),[t]),u(e)},children:o.includes(t)?"Added to cart":"Add to cart"}),Object(l.jsx)(N,{disablet:!1,classModificator:d()("Button--heart",{"Button--heartSelected":s.includes(t)}),callback:function(){var e=[];e=s.includes(t)?s.filter((function(e){return e!==t})):[].concat(Object(w.a)(s),[t]),a(e)}})]})},M=function(e){var t=e.product,c=t.imageUrl,n=t.name,s=t.newPrice,r=t.price,i=t.screen,o=t.capacity,u=t.ram,j=t.id,d=t.type,b=[{key:"Screen",value:i},{key:"Capacity",value:o},{key:"RAM",value:u}];return Object(l.jsxs)("div",{className:"ProductCard",children:[Object(l.jsx)(a.b,{to:"/".concat("accessory"===d?"accesori":d,"s/").concat(j),children:Object(l.jsx)("img",{src:c,alt:"",className:"ProductCard__image"})}),Object(l.jsx)("p",{className:"ProductCard__title",children:n}),Object(l.jsxs)("div",{className:"ProductCard__price",children:[Object(l.jsx)("span",{className:"ProductCard__newPrice",children:"$".concat(s)}),r!==s&&Object(l.jsx)("span",{className:"ProductCard__oldPrice",children:"$".concat(r)})]}),Object(l.jsx)("div",{className:"ProductCard__info",children:Object(l.jsx)(B,{techSpecs:b,isTextSmall:!0})}),Object(l.jsx)(L,{id:j,size:"small"})]})},J=function(e){var t=e.products;return Object(l.jsx)("ul",{className:"ProductsList",children:t.map((function(e){return Object(l.jsx)("li",{children:Object(l.jsx)(M,{product:e})},e.id)}))})},A=function(e){var t=e.title,c=e.products,n=Object(r.useState)(0),s=Object(b.a)(n,2),a=s[0],i=s[1],o=Object(r.useState)([]),u=Object(b.a)(o,2),j=u[0],d=u[1];return Object(r.useEffect)((function(){d(Object(w.a)(c).splice(a,4))}),[a]),Object(l.jsxs)("div",{className:"ProductsSlider",children:[Object(l.jsxs)("div",{className:"ProductsSlider__header",children:[Object(l.jsx)("h2",{className:"ProductsSlider__title",children:t}),Object(l.jsx)(N,{classModificator:"Button--arrowLeft",disablet:0===a,callback:function(){i(a<0?0:a-4)}}),Object(l.jsx)(N,{classModificator:"Button--arrowRight",disablet:a===c.length-4,callback:function(){a>c.length-4?i(c.length-4):i(a+4)}})]}),Object(l.jsx)(J,{products:j})]})},F=(c(50),c(51),function(e){var t=e.category,c=e.itemsCount,n=t.toLowerCase();return Object(l.jsxs)("div",{className:"CategoryCard",children:[Object(l.jsx)(a.b,{to:n,children:Object(l.jsx)("img",{src:"img/categories/".concat(n,".jpg"),alt:t,className:"CategoryCard__image"})}),Object(l.jsx)("h3",{className:"CategoryCard__title",children:"Phones"===t?"Mobile phones":t}),Object(l.jsx)("p",{className:"CategoryCard__modelsCount",children:"".concat(c," models")})]})}),E=function(){var e=JSON.parse(localStorage.getItem("phones")||"[]"),t=JSON.parse(localStorage.getItem("tablets")||"[]"),c=JSON.parse(localStorage.getItem("accessories")||"[]"),n=[{category:"Phones",itemsCount:e.length},{category:"Tablets",itemsCount:t.length},{category:"Accessories",itemsCount:c.length}];return Object(l.jsxs)("div",{className:"Categories",children:[Object(l.jsx)("h2",{className:"Categories__title",children:"Shop by category"}),Object(l.jsx)("ul",{className:"Categories__list",children:n.map((function(e){var t=e.category,c=e.itemsCount;return Object(l.jsx)("li",{children:Object(l.jsx)(F,{category:t,itemsCount:c})},t)}))})]})},H=function(){var e=JSON.parse(localStorage.getItem("products")||"[]"),t=e.filter((function(e){return e.discount})).sort((function(e,t){return t.discountSum-e.discountSum})),c=e.filter((function(e){return!e.discount})).sort((function(e,t){return t.price-e.price}));return Object(r.useEffect)((function(){window.scrollTo({top:0})}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(I,{}),Object(l.jsx)(A,{title:"Hot prices",products:t}),Object(l.jsx)(E,{}),Object(l.jsx)(A,{title:"Brand new models",products:c})]})},R=(c(52),c(53),function(){var e=Object(i.e)().pathname.slice(1).split("/"),t=JSON.parse(localStorage.getItem("products")||"[]");return Object(l.jsxs)("div",{className:"Breadcrumbs",children:[Object(l.jsx)(a.b,{to:"/",className:"Breadcrumbs__link Breadcrumbs__link--home"}),e.map((function(c,n){var s=c[0].toUpperCase()+c.slice(1);if(n===e.length-1){var r=t.find((function(e){return e.id===c}));return Object(l.jsx)("span",{children:r?r.name:s},c)}return Object(l.jsx)(a.b,{to:"/".concat(c),className:"Breadcrumbs__link",children:s},c)}))]})}),D=(c(54),c(55),function(e){var t=e.options,c=e.onChangeItem,n=e.close,s=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=function(e){var t,c;null!==(t=s.current)&&void 0!==t&&null!==(c=t.parentElement)&&void 0!==c&&c.contains(e.target)||n()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}})),Object(l.jsx)("ul",{className:"OptionsList",ref:s,children:t.map((function(e){return Object(l.jsx)("li",{children:Object(l.jsx)("button",{type:"button",className:"OptionsList__item",onClick:function(){c(e),n()},children:e})},e)}))})}),$=function(e){var t=e.title,c=e.selectedItem,n=e.items,s=e.onChangeItem,a=Object(r.useState)(!1),i=Object(b.a)(a,2),o=i[0],u=i[1];return Object(l.jsxs)("div",{className:"Select",children:[Object(l.jsx)("p",{className:"Select__title",children:t}),Object(l.jsx)(N,{disablet:!1,classModificator:"Button--select",callback:function(){u(!o)},children:Object(l.jsx)("span",{className:d()("Select__selectedItem",{"Select__selectedItem Select__selectedItem--opened":o}),children:c})}),o&&Object(l.jsx)(D,{options:n,onChangeItem:s,close:function(){u(!1)}})]})},G=(c(56),function(e){var t=e.pagesCount,c=Object(a.d)(),n=Object(b.a)(c,1)[0],s=Object(i.f)(),r=n.get("page")||1,o=Array.from({length:t},(function(e,t){return t+1}));return Object(l.jsxs)("div",{className:"Pagination",children:[Object(l.jsx)(N,{classModificator:"Button--arrowLeft",callback:function(){n.set("page","".concat(+r-1)),s({search:n.toString()})},disablet:r<=1}),Object(l.jsx)("div",{className:"Pagination__pages",children:o.map((function(e){return e===+r||e===+r+1||e===+r-1?Object(l.jsx)(N,{disablet:!1,classModificator:+r===e?"Button--selected":"",callback:function(){n.set("page","".concat(e)),s({search:n.toString()})},children:e},e):null}))}),Object(l.jsx)(N,{classModificator:"Button--arrowRight",callback:function(){n.set("page","".concat(+r+1)),s({search:n.toString()})},disablet:r>=t})]})}),U=function(e){var t=e.title,c=e.products,n=Object(i.f)(),s=Object(a.d)(),o=Object(b.a)(s,1)[0],u=o.get("sort")||"Newest",j=o.get("perPage")||"All",d=o.get("page")||1,O=o.get("query")||"",m=Math.ceil(c.length/+j),h=+d*("All"===j?c.length:+j),f=h-+j,x="Favourites"===t,p=O?c.filter((function(e){return e.name.toLowerCase().includes(O)})):Object(w.a)(c),g=function(e){switch(e){case"Newest":o.set("sort",e),c.sort((function(e,t){return e.age-t.age}));break;case"Alphabetically":o.set("sort",e),c.sort((function(e,t){return e.name.localeCompare(t.name)}));break;case"Cheapest":o.set("sort",e),c.sort((function(e,t){return e.newPrice-t.newPrice}));break;case"All":o.delete("perPage"),o.delete("page");break;default:o.set("perPage",e),o.set("page","1")}n({search:o.toString()})};return Object(r.useEffect)((function(){window.scrollTo(0,0)}),[]),O?Object(l.jsx)(l.Fragment,{children:0===p.length?Object(l.jsx)(k,{type:"search"}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("p",{className:"ProductsPage__amount",children:"".concat(p.length," ").concat(p.length>1?"results":"result")}),Object(l.jsx)(J,{products:p})]})}):Object(l.jsx)(l.Fragment,{children:c[0]?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(R,{}),Object(l.jsx)("h1",{className:"ProductsPage__title",children:t}),Object(l.jsx)("p",{className:"ProductsPage__amount",children:"".concat(c.length," models")}),!x&&Object(l.jsxs)("div",{className:"ProductsPage__controls",children:[Object(l.jsx)($,{title:"Sort by",selectedItem:u,items:["Newest","Alphabetically","Cheapest"],onChangeItem:g}),Object(l.jsx)($,{title:"Items on page",selectedItem:j,items:["4","8","16","All"],onChangeItem:g})]}),Object(l.jsx)(J,{products:c.slice(f,h)}),m>1&&Object(l.jsx)(G,{pagesCount:m})]}):Object(l.jsx)(k,{type:""})})},q=function(){var e=JSON.parse(localStorage.getItem("phones")||"[]");return Object(l.jsx)(U,{title:"Mobile phones",products:e})},z=function(){var e=JSON.parse(localStorage.getItem("tablets")||"[]");return Object(l.jsx)(U,{title:"Tablets",products:e})},W=function(){var e=JSON.parse(localStorage.getItem("accessories")||"[]");return Object(l.jsx)(U,{title:"Accessories",products:e})},Y=(c(57),c(58),function(){return Object(l.jsx)("div",{className:"Loader",children:Object(l.jsxs)("div",{className:"Loader__circle",children:[Object(l.jsx)("div",{className:"Loader__loading"}),Object(l.jsx)("div",{className:"Loader__center"})]})})}),K=(c(59),function(){var e=Object(i.f)();return Object(l.jsx)("button",{type:"button",className:"BackButton",onClick:function(){e(-1)},children:"Back"})}),Q=(c(60),function(e){var t=e.images,c=Object(r.useState)(""),n=Object(b.a)(c,2),s=n[0],a=n[1];return Object(r.useEffect)((function(){a(t[0])}),[t]),Object(l.jsxs)("div",{className:"Images",children:[Object(l.jsx)("ul",{children:t.map((function(e){return Object(l.jsx)("li",{className:"Images__listItem",children:Object(l.jsx)("button",{type:"button",className:d()("Images__button",{"Images__button--selected":s===e}),onClick:function(){return a(e)},children:Object(l.jsx)("img",{src:e,alt:"Gadget",className:"Images__image"})})},e)}))}),Object(l.jsx)("div",{className:"Images__mainImageContainer",children:Object(l.jsx)("img",{src:s,alt:"Gadget",className:"Images__image"})})]})}),V=(c(61),function(e){var t=e.product,c=e.details,n=t.newPrice,s=t.price,a=t.screen,r=t.ram,i=t.id,o=[{key:"Screen",value:a},{key:"Resolution",value:c.display.screenResolution},{key:"Processor",value:c.hardware.cpu},{key:"RAM",value:r}];return Object(l.jsxs)("div",{className:"ProductInfo",children:[Object(l.jsxs)("div",{className:"ProductInfo__price",children:[Object(l.jsx)("span",{className:"ProductInfo__newPrice",children:"$".concat(n)}),s!==n&&Object(l.jsx)("span",{className:"ProductInfo__oldPrice",children:"$".concat(s)})]}),Object(l.jsx)("div",{className:"ProductInfo__buttons",children:Object(l.jsx)(L,{id:i,size:"big"})}),Object(l.jsx)(B,{techSpecs:o,isTextSmall:!0})]})}),X=function(){for(var e=Object(r.useState)(null),t=Object(b.a)(e,2),c=t[0],n=t[1],s=Object(i.g)().productId,a=JSON.parse(localStorage.getItem("products")||"[]"),o=a.find((function(e){return e.id===s})),u=[{key:"Screen",value:null===o||void 0===o?void 0:o.screen},{key:"Resolution",value:null===c||void 0===c?void 0:c.display.screenResolution},{key:"Processor",value:null===c||void 0===c?void 0:c.display.screenResolution},{key:"RAM",value:null===o||void 0===o?void 0:o.ram},{key:"Built in memory",value:null===c||void 0===c?void 0:c.storage.ram},{key:"Camera",value:null===c||void 0===c?void 0:c.camera.primary},{key:"OS",value:null===c||void 0===c?void 0:c.android.os},{key:"Cell",value:null===c||void 0===c?void 0:c.connectivity.cell}],j=[];j.length<8;){var d=Math.floor(8*Math.random());j.includes(a[d])||j.push(a[d])}return Object(r.useEffect)((function(){(function(e){return fetch("https://mate-academy.github.io/react_phone-catalog/api/products/".concat(e,".json")).then((function(e){return e.json()}))})(s).then((function(e){n(e)})),window.scrollTo({top:0,behavior:"smooth"})}),[s]),Object(l.jsx)(l.Fragment,{children:c?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(R,{}),Object(l.jsx)(K,{}),Object(l.jsx)("h1",{className:"ProductDetailsPage__title",children:c.name}),Object(l.jsxs)("div",{className:"ProductDetailsPage__content",children:[Object(l.jsxs)("div",{className:"ProductDetailsPage__info",children:[Object(l.jsx)(Q,{images:c.images}),Object(l.jsx)(V,{product:o,details:c})]}),Object(l.jsxs)("div",{className:"ProductDetailsPage__description",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{className:"ProductDetailsPage__subTitle",children:"About"}),Object(l.jsx)("article",{children:c.description})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{className:"ProductDetailsPage__subTitle",children:"Tech specs"}),Object(l.jsx)(B,{techSpecs:u,isTextSmall:!1})]})]}),Object(l.jsx)(A,{title:"You may also like",products:j})]})]}):Object(l.jsx)(Y,{})})},Z=function(){var e=Object(r.useContext)(m).favourites,t=JSON.parse(localStorage.getItem("products")||"[]").filter((function(t){return e.includes(t.id)}));return Object(l.jsx)(U,{title:"Favourites",products:t})},ee=(c(62),c(63),c(64),function(e){var t=e.product,c=e.setTotalSum,n=Object(r.useState)(1),s=Object(b.a)(n,2),a=s[0],i=s[1],o=Object(r.useContext)(f),u=o.cart,j=o.setCart,d=a*t.newPrice;return Object(l.jsxs)("div",{className:"CartItem",children:[Object(l.jsxs)("div",{className:"CartItem__leftSide",children:[Object(l.jsx)(N,{disablet:!1,classModificator:"Button--close",callback:function(){var e=[];e=u.includes(t.id)?u.filter((function(e){return e!==t.id})):[].concat(Object(w.a)(u),[t.id]),j(e),c((function(e){return e-d}))}}),Object(l.jsx)("img",{src:t.imageUrl,alt:"Gadget",className:"CartItem__image"}),Object(l.jsx)("p",{children:t.name})]}),Object(l.jsxs)("div",{className:"CartItem__rightSide",children:[Object(l.jsxs)("div",{className:"CartItem__buttons",children:[Object(l.jsx)(N,{classModificator:"Button--minus",callback:function(){i(a-1),c((function(e){return e-t.newPrice}))},disablet:1===a}),Object(l.jsx)("span",{children:a}),Object(l.jsx)(N,{disablet:!1,classModificator:"Button--plus",callback:function(){i(a+1),c((function(e){return e+t.newPrice}))}})]}),Object(l.jsx)("h2",{children:"$".concat(d)})]})]})}),te=function(e){var t=e.products,c=e.setTotalSum;return Object(l.jsx)("ul",{className:"CartList",children:t.map((function(e){return Object(l.jsx)("li",{children:Object(l.jsx)(ee,{product:e,setTotalSum:c})},e.id)}))})},ce=(c(65),function(e){var t=e.totalSum,c=e.productsCount;return Object(l.jsxs)("div",{className:"Total",children:[Object(l.jsxs)("div",{className:"Total__sum",children:[Object(l.jsx)("h2",{className:"Total__title",children:"$".concat(t)}),Object(l.jsx)("p",{children:"Total for ".concat(c," ").concat(c>1?"items":"item")})]}),Object(l.jsx)("div",{className:"Total__button",children:Object(l.jsx)(T,{selected:!1,callback:function(){},children:"Checkout"})})]})}),ne=function(){var e=Object(r.useContext)(f).cart,t=JSON.parse(localStorage.getItem("products")||"[]").filter((function(t){return e.includes(t.id)})),c=Object(r.useState)(t.reduce((function(e,t){return e+t.newPrice}),0)),n=Object(b.a)(c,2),s=n[0],a=n[1];return e[0]?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(K,{}),Object(l.jsx)("h1",{className:"CartPage__title",children:"Cart"}),Object(l.jsxs)("div",{className:"CartPage__content",children:[Object(l.jsx)(te,{products:t,setTotalSum:a}),Object(l.jsx)(ce,{totalSum:s,productsCount:t.length})]})]}):Object(l.jsx)(k,{type:""})},se=function(){return Object(r.useEffect)((function(){fetch("https://mate-academy.github.io/react_phone-catalog/api/products.json").then((function(e){return e.json()})).then((function(e){return e.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{discountSum:e.price/100*e.discount,newPrice:e.price-e.price/100*e.discount})}))})).then((function(e){var t=e.filter((function(e){return"phone"===e.type})),c=e.filter((function(e){return"tablet"===e.type})),n=e.filter((function(e){return"accessory"===e.type}));localStorage.setItem("products",JSON.stringify(e)),localStorage.setItem("phones",JSON.stringify(t)),localStorage.setItem("tablets",JSON.stringify(c)),localStorage.setItem("accessories",JSON.stringify(n)),localStorage.setItem("totalSum","0")}))}),[]),Object(l.jsx)(h,{children:Object(l.jsx)(x,{children:Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(C,{}),Object(l.jsx)("main",{className:"App__content",children:Object(l.jsx)(y,{children:Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{path:"/",element:Object(l.jsx)(H,{})}),Object(l.jsx)(i.a,{path:"/phones",element:Object(l.jsx)(q,{})}),Object(l.jsx)(i.a,{path:"/phones/:productId",element:Object(l.jsx)(X,{})}),Object(l.jsx)(i.a,{path:"/tablets",element:Object(l.jsx)(z,{})}),Object(l.jsx)(i.a,{path:"/tablets/:productId",element:Object(l.jsx)(X,{})}),Object(l.jsx)(i.a,{path:"/accessories",element:Object(l.jsx)(W,{})}),Object(l.jsx)(i.a,{path:"/accessories/:productId",element:Object(l.jsx)(X,{})}),Object(l.jsx)(i.a,{path:"/favourites",element:Object(l.jsx)(Z,{})}),Object(l.jsx)(i.a,{path:"/cart",element:Object(l.jsx)(ne,{})}),Object(l.jsx)(i.a,{path:"*",element:Object(l.jsx)(k,{type:"page"})})]})})}),Object(l.jsx)(P,{})]})})})};s.a.render(Object(l.jsx)(a.a,{children:Object(l.jsx)(se,{})}),document.getElementById("root"))}]),[[66,1,2]]]);
//# sourceMappingURL=main.0cb4b52f.chunk.js.map